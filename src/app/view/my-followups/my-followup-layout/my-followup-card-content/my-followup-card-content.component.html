<div class="row" style="overflow-y: hidden !important;overflow-x: hidden !important;height: 80vh !important;">
  <div class="col-8" >
    <!-- <app-my-followup-tool-bar></app-my-followup-tool-bar> -->
    <mat-card class="" >
      <div class="row">
        <div class="col d-flex">
          <p
            style="margin-right: 10px; color: blue"
            (click)="getFilter('All')"
            [class.active_tab]="selectedTab === 'All'"
          >
            All 
            <!-- <span>({{ countDataValue?.All }})</span> -->
            
          </p>
          <p
            style="margin-right: 10px; color: orange"
            (click)="getFilter('Upcoming')"
            [class.active_tab]="selectedTab === 'Upcoming'"
          >
            Upcoming
             <!-- <span>
              ({{ countDataValue?.Upcoming }})
            </span> -->
            
          </p>
          <p
            style="margin-right: 10px; color: green"
            (click)="getFilter('Done')"
            [class.active_tab]="selectedTab === 'Done'"
          >
            Done  
             <!-- <span>
              ({{ countDataValue?.Done }})
            </span>  -->
            
          </p>
          <p
            style="margin-right: 10px; color: red"
            (click)="getFilter('Missed')"
            [class.active_tab]="selectedTab === 'Missed'"
          >
            Missed 
            <!-- <span>
              ({{ countDataValue?.Missed }})
            </span> -->
            
          </p>
        </div>

     
      </div>
      <div class="row" style="">
        <div class="col-sm-0 col-md-0 col-lg-6">
          <app-my-followup-sort
            *ngIf="renderingData?.length > 0"
            (selectedSort)="getSort($event)"
          ></app-my-followup-sort>
        </div>
        <div class="col-sm-12 col-md-12 col-lg-6">
          <div class="row">
            <div
              class="col p-0"
              (click)=" openVideoCall('All')"
              title="Send Video Conferencing Invite"
            >
              <!-- <i class="bi bi-camera-video"></i> -->
              <img
                src="./assets/images/videocall.png"
                alt=""
                height="17"
                width="17"
              />
            </div>
            <!-- <div class="col p-0 position-rel" (click)="referFollowups()" title="Refer Followup">
              <i class="bi bi-person-check"></i>
            </div> -->
            <div
              class="col p-0"
              (click)="openWhatsAppChat()"
              title="WhatsApp Chat"
            >
              <!-- <i class="bi bi-whatsapp"></i> -->
              <!-- <mat-icon>watsapp</mat-icon> -->
              <img
                src="./assets/images/WhatsApp_icon.png"
                alt=""
                height="21"
                width="21"
              />
            </div>
            <div class="col p-0" (click)="openSMS('All')" title="Send SMS">
              <!-- <i class="bi bi-chat-left-dots"></i> -->
              <!-- <i class="bi bi-chat-dots"></i>
               -->
              <img
                src="./assets/images/chat.png"
                alt=""
                height="15"
                width="18"
              />
              <!-- <mat-icon>sms</mat-icon> -->
            </div>
            <div
              class="col p-0"
              (click)="openEmailChat('All')"
              title="Send Email"
            >
              <!-- <i class="bi bi-envelope"></i> -->
              <img
                src="./assets/images/email-icon.png"
                alt=""
                height="12"
                width="16"
              />
              <!-- <mat-icon>mail</mat-icon> -->
            </div>
            <div
              class="col p-0"
              (click)="refreshFollowUps()"
              title="Page Refresh"
            >

              <!-- <mat-icon>autorenew</mat-icon> -->
              <!-- <i class="bi bi-repeat"></i> -->
              <img
                src="./assets/images/refresh.svg"
                alt=""
                height="18"
                width="18"
              />
            </div>
            <div class="col p-0" (click)="downloadLead()" title="Download">
              <div
                *ngIf="selectedCheckboxIds.length > 0"
                
              >
                <!-- <mat-icon >save_alt</mat-icon> -->
                <!-- <i class="bi bi-download"></i> -->
                <img
                  src="./assets/images/download-icon.png"
                  alt=""
                  height="18"
                  width="18"
                />
            </div>
              <a
                *ngIf="selectedCheckboxIds.length === 0"
                target="_blank"
                (click)="downloadLead()"
              >
                <!-- <mat-icon >save_alt</mat-icon> -->
                <!-- <i class="bi bi-download"></i> -->
                <img
                  src="./assets/images/download-icon.png"
                  alt=""
                  height="18"
                  width="18"
                />
              </a>
            </div>

            <div
              class="col p-0"
              (click)="onClickLink('All')"
              title="Send Payment Link"
            >
              <!-- <mat-icon>link</mat-icon> -->
              <img
                src="./assets/images/link-icon.png"
                alt=""
                width="19"
                height="19"
              />
            </div>

            <div
              class="col p-0 d-flex"
              (click)="filterFollowups()"
              title="Filter"
            >
              <i
                class="bi bi-funnel"
                style="
                  color: palevioletred !important;
                  height: 20% !important;
                  width: 20%;
                  font-size: 18px !important;
                "
                *ngIf="!filterFlag"
              ></i>
             
              <i
                style="color: palevioletred !important"
                class="bi bi-funnel-fill"
                *ngIf="filterFlag"
              
              ></i>
            

              
            </div>
          </div>
        </div>
      </div>

      <div class="row my-1">
        <div class="col" style="margin-left: -10px;"   *ngIf="renderingData.length!==0">
          <mat-checkbox  
            class=""
          
            (change)="selectAll($event, renderingData)"
            class="ms-4"
            [checked]="checkAll"
            ><div style="font-size: 12px" class="ps-3">
              SELECT ALL 
             
            </div></mat-checkbox
          >

          <span class="mx-2 ">({{totalNumberOfRecords}})</span> 
        </div>
      </div>
    
    </mat-card>
   
    <!-- {{renderingData.length}} -->
    <div class="row"  *ngIf="selectedDate">
      <div class="col my-2 text-center ">
        <p  class="my-2" style="font-size: 12px;font-weight: normal !important;">
          Applied Date &nbsp; : &nbsp; {{ selectedDate | date : "dd-MM-yyyy " }}
        </p>
        <!-- <div class="card w-50 text-center shadow-lg" >
          
        </div>
      -->
      </div>
    </div>
    <!-- {{(renderingData | filter: followupSearch).length}} -->
    <app-nodata
      class="d-flex align-items-center justify-content-center"
      *ngIf="
        !renderingData ||
        renderingData?.length === 0 ||
        (renderingData | filter : followupSearch)?.length === 0
      "
    ></app-nodata>

    <div
      class="row" style="height: 50%;overflow-y: auto;padding-bottom: 615px;"
      *ngIf="
        (renderingData | filter : followupSearch)?.length > 0;
        else noResultsSection
      "
    >
      <div
        class="col-12 col-md-12"
        *ngFor="
          let followUp of renderingData | filter : followupSearch;
          let i = index
        "
      >
        <!-- Show a message or any other content when there are no search results -->
        <ng-template #noResultsSection>
          <div class="col">
            <app-nodata
              class="d-flex align-items-center justify-content-center"
            ></app-nodata>
          </div>
        </ng-template>

        <mat-card class="">
          <div class="row d-flex align-items-center shadow-lg p-3">
            <div class="col-sm-12 col-md-12 col-lg-4">
              <div class="row">
                <div class="col-2 d-flex align-items-center">
                  <mat-checkbox  
                    (change)="onCheckboxChange($event,followUp.lead_id,followUp.lead)"
                    [checked] ="followUp.checked"
                  ></mat-checkbox>
                </div>

               
                <div class="col">
                  <div class="row text-start" >
                    <div
                      class="col-12 c-name point-set fw-bold"
                      (click)="EditFollowups(followUp.id)"
                    >
                      {{ followUp.lead | titlecase }}
                    </div>
                    <div class="col-12 text-muted my-1" style="font-size: 10px">
                      <b>{{ followUp.lead_mobile_number }}</b>
                    </div>
                  
                  </div>
                </div>
              </div>
            </div>
            <div class="col"></div>
            <div class="col-sm-12 col-md-6 col-lg-2">
              <div class="row" >
                <div
                  class="col-12"
                  [ngClass]="{
                    yellow: followUp.follow_up_status_name == 'Upcoming',
                    green: followUp.follow_up_status_name == 'Done',
                    red: followUp.follow_up_status_name == 'Missed'
                  }"
                >
                  <b> {{ followUp.follow_up_status_name | uppercase }}</b>
                </div>

              </div>
            </div>
            <div class="col"></div>
         
            <div class="col-sm-0 col-md-0 col-lg-1"></div>
            <div class="col-sm-12 col-md-6 col-lg-3 p-ct my-0 py-0 gy-0 mx-0">
              <div class="row">
                <div class="col p-0">
                  <div ngbDropdown class="d-inline-block lead-dropdown my-1">
                  
                  </div>
                </div>


                <div
                class="col p-1"
                (click)="EditFollowups(followUp.id)"
                title="Edit Followup"
              >
               
                <img
                          src="./assets/images/edit-icon.png"
                          alt=""
                          width="15"
                          height="15"
                        /> 
              </div>




                <div
                  class="col p-1"
                  (click)="IndividualopenVideoCall(followUp)"
                  title="Send Video Conferencing Invite"
                >
                  <!-- <i class="bi bi-camera-video"></i> -->
                  <img
                    src="./assets/images/videocall.png"
                    alt=""
                    height="17"
                    width="17"
                  />
                </div>
                <!-- <div class="col p-1 " >
              <i class="bi bi-telephone"></i>
            </div> -->
                <div
                  class="col p-1 position-rel"
                  (click)="IndividualopenSMS(followUp)"
                  title="Send SMS"
                >
                  <!-- <i class="bi bi-chat-dots"></i> -->
                  <img
                    src="./assets/images/chat.png"
                    alt=""
                    height="15"
                    width="18"
                  />
                </div>
                <div
                  class="col p-1"
                  (click)="openEmailSendoutForm(followUp)"
                  title="Send Email"
                >
                  <!-- <i class="bi bi-envelope"></i> -->
                  <img
                    src="./assets//images/email-icon.png"
                    alt=""
                    height="12"
                    width="16"
                  />
                </div>
                <div
                  class="col p-1"
                  (click)="IndividualopenWhatsAppChat(followUp)"
                  title="WhatsApp Chat"
                >
                  <!-- <i class="bi bi-whatsapp"></i> -->
                  <img
                    src="./assets/images/WhatsApp_icon.png"
                    alt=""
                    height="21"
                    width="21"
                  />
                </div>
                <!-- <div class="col  p-1 ">
              <i class="bi bi-wechat"></i>
            </div> -->

                <div class="col p-0 py-1">
                  <mat-icon
                    title="View Details"
                    class="common-class"
                    *ngIf="expandedCardIndex !== i"
                    (click)="expandCard(i)"
                    >expand_more</mat-icon
                  >
                  <mat-icon
                    class="common-class"
                    *ngIf="expandedCardIndex === i"
                    (click)="expandCard(i)"
                    >expand_less</mat-icon
                  >
                </div>
              </div>
            </div>
          </div>

          <!-------------EXPANSION PANEL------------------>
          <!-- <ng-container *ngIf="expandPanel">
        <app-my-followup-bottom-pannel></app-my-followup-bottom-pannel>
      </ng-container> -->

          <ng-container *ngIf="expandedCardIndex === i">
            <mat-card class="inner-expansion">
              <div class="row mb-1">
                <div class="row mb-1">
                  <div class="col">
                    <div class="row text-start">
                      <div class="col-12 pannel-label">Lead Number</div>
                      <div class="col-12" *ngIf="!followUp.lead_number">
                        {{ "NA" }}
                      </div>
                      <div class="col-12" *ngIf="followUp.lead_number">
                        {{ followUp.lead_number }}
                      </div>
                    </div>
                  </div>
                  <div class="col">
                    <div class="row text-start">
                      <div class="col-12 pannel-label">Lead ID</div>
                      <div class="col-12" *ngIf="!followUp.lead_id">
                        {{ "NA" }}
                      </div>
                      <div class="col-12" *ngIf="followUp.lead_id">
                        {{ followUp.lead_id }}
                      </div>
                    </div>
                  </div>
                  <div class="col">
                    <div class="row text-start">
                      <div class="col-12 pannel-label">Age</div>
                      <div class="col-12" *ngIf="!followUp.age">{{ "NA" }}</div>
                      <div class="col-12" *ngIf="followUp.age">
                        {{ followUp.age }}
                      </div>
                    </div>
                  </div>
                 
                  <div class="col">
                    <div class="row text-start">
                      <div class="col-12 pannel-label">Source</div>
                      <div class="col-12" *ngIf="!followUp.source">NA</div>
                      <div class="col-12" *ngIf="followUp.source">
                        {{ followUp.source }}
                      </div>
                    </div>
                  </div>
                  <div class="col">
                    <div class="row text-start">
                      <div class="col-12 pannel-label">Next Action Date</div>
                      <div class="col-12" *ngIf="!followUp.next_action_datetime">
                        {{ "NA" }}
                      </div>
                      <div class="col-12" *ngIf="followUp.next_action_datetime">
                        {{ followUp.next_action_datetime | date : "medium" }}
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row my-2">
              

                  <div class="col">
                    <div class="row text-start">
                      <div class="col-12 pannel-label">
                        Modification Date Time
                      </div>
                      <div class="col-12" *ngIf="!followUp.modified_datetime">
                        {{ "NA" }}
                      </div>
                      <div class="col-12" *ngIf="followUp.modified_datetime">
                        {{ followUp.modified_datetime | date : "medium" }}
                      </div>
                    </div>
                  </div>
                  <div class="col">
                    <div class="row text-start">
                      <div class="col-12 pannel-label">Creation Date Time</div>
                      <div class="col-12" *ngIf="!followUp.created_datetime">
                        {{ "NA" }}
                      </div>
                      <div class="col-12" *ngIf="followUp.created_datetime">
                        {{ followUp.created_datetime | date : "medium" }}
                      </div>
                    </div>
                  </div>

                  <div class="col">
                    <div class="row text-start">
                      <div class="col-12 pannel-label">Lead Owner</div>
                

                      <div class="col-12">
                        {{ followUp.counsellor_first_name }}
                        {{ followUp.counsellor_last_name }}
                      </div>
                    </div>
                  </div>
                  <div class="col">
                    <div class="row text-start">
                      <div class="col-12 pannel-label">City</div>
                      <div class="col-12" *ngIf="!followUp.city">
                        {{ "NA" }}
                      </div>

                      <div class="col-12" *ngIf="followUp.city">
                        {{ followUp.city }}
                      </div>
                    </div>
                  </div>
                  <div class="col">
                    <div class="row text-start">
                      <div class="col-12 pannel-label">Counselled By</div>
                      <div class="col-12" *ngIf="!followUp.counselled_by">
                        {{ "NA" }}
                      </div>

                      <div class="col-12" *ngIf="followUp.counselled_by">
                        {{ followUp.counselled_by }}
                      </div>
                    </div>
                  </div>
                </div>

                <div class="row mb-1">
                  <div class="col">
                    <div class="row text-start">
                      <div class="col-12 pannel-label">Payment Status</div>
                      <div class="col-12" *ngIf="!followUp.payment_status">
                        {{ "NA" }}
                      </div>
                      <div class="col-12" *ngIf="followUp.payment_status">
                        {{ followUp?.payment_status }}
                      </div>
                    </div>
                  </div>
                  <div class="col">
                    <div class="row text-start">
                      <div class="col-12 pannel-label">Admission Status</div>
                      <div class="col-12" *ngIf="!followUp.admission_status">
                        NA
                      </div>
                      <div class="col-12" *ngIf="followUp.admission_status">
                        {{ followUp?.admission_status }}
                      </div>
                    </div>
                  </div>
                  <div class="col">
                    <div class="row text-start">
                      <div class="col-12 pannel-label">Document Status</div>
                      <div class="col-12" *ngIf="!followUp.docs_process">
                        NA
                      </div>
                      <div class="col-12" *ngIf="followUp.docs_process">
                        {{ followUp.docs_process }}
                      </div>
                    </div>
                  </div>
                
                  <div class="col">
                    <div class="row text-start">
                      <div class="col-12 pannel-label">Course Looking For</div>
                      <div class="col-12" *ngIf="!followUp.course_looking_for">
                        NA
                      </div>
                      <div class="col-12" *ngIf="followUp.course_looking_for">
                        {{ followUp?.course_looking_for }}
                      </div>
                    </div>
                  </div>
                  <div class="col">
                    <div class="row text-start">
                      <div class="col-12 pannel-label">Stream</div>
                      <div class="col-12" *ngIf="!followUp.stream">NA</div>
                      <div class="col-12" *ngIf="followUp.stream">
                        {{ followUp?.stream }}
                      </div>
                    </div>
                  </div>
              
                </div>
               
             
              </div>
              <div class="row mb-1">
               
              </div>
              <div class="row mb-1">
               

             
              </div>
             
           
            </mat-card>
         
          </ng-container>
        </mat-card>
      </div>
   
    </div>

    <mat-paginator *ngIf="!loading"
    [length]="totalNumberOfRecords"
    [pageSizeOptions]="[5, 10]"
    aria-label="Select page"
    (page)="onPageChangeNew($event)"
    [pageIndex]="currentPage"
    [pageSize]="pageSize"
    #allPaginator
  >
  </mat-paginator>

 
    
  </div>

  
  <div class="col" style="padding: 45px;position: sticky;top: 0;">
    <div class="col d-flex"></div>

   

    <div class="input-group z-s m-auto m-2" id="calender-col">
      <div class="col-12">
        <mat-card>
       
          <input
            type="search"
            class="form-control icon-rtl"
            placeholder="Search by Name/Mobile"
            [(ngModel)]="searchValue"
            (input)="getSearchValue($event)"
          
          />

          <mat-calendar
          class="custom-calendar shadow-lg my-5"
          [(selected)]="selectedDate"
          (selectedChange)="selectDate($event)"
          [minDate]="minDate"
          [(ngModel)]="selectedDate"
        >
        </mat-calendar>

      

        </mat-card>
      </div>
    </div>
  </div>
 
  
</div>


